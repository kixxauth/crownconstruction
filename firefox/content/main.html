<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Crown Construction ERM</title>
  <link type="text/css" href="css/start/jquery-ui-1.8rc3.custom.css" rel="stylesheet" />	
  <link type="text/css" href="css/main.css" rel="stylesheet" />	
  <script src="jquery-1.4.2.min.js" type="application/javascript"></script>
  <script src="jquery-ui-1.8rc3.custom.min.js" type="application/javascript"></script>
	<script type="text/javascript" src="jquery.ba-bbq.js"></script>
  <script src="underscore.js" type="application/javascript"></script>
  <script src="resource://crownconstruction/modules/jmonad.js" type="application/javascript"></script>
  <script src="main.js" type="application/javascript;version=1.7"></script>
</head>
<body>

	<p>Username:
	<input id="username" name="username" class="bbqpork" type="text" />
	</p>
	<p>Passkey:
	<input id="passkey" name="passkey" class="bbqpork" type="password" />
	</p>
	<p>
	<button onclick="APP.start()">start</button>
	</p>
	<p>
	<button onclick="APP.commit()">commit</button>
	</p>

	<div id="tabs">
		<ul>
			<li><a href="#tab-customers">customers</a></li>
			<li><a href="#tab-jobs">jobs</a></li>
		</ul>
		<div id="tab-customers" class="bbq">
			<ul>
				<li><a href="#new">new customer</a></li>
				<li><a href="#find">find customer</a></li>
			</ul>
			<div id="customer_form">
			</div>
		</div>
		<div id="tab-jobs">
		</div>
	</div>

	<!-- templates -->
	<script type="text/html" id="customer-names_template">
		<% var i = 0, len = names.length, name; %>
		<div class="form-sub-section">
			<div class="form-sub-section-head-ctn">
				<h4 class="form-sub-section-header">Names</h4>
			</div>

			<% for (; i < len; i += 1) { %>
			<% name = names[i];  %>
			<div class="input-section">
				<div class="line ui-helper-clearfix">
					<p class="input-float"><label>last:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= name.last.path %>" value="<%= name.last.value %>" />
					</p>
					<p class="input-float"><label>first:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= name.first.path %>" value="<%= name.first.value %>" />
					</p>
				</div>
			</div>
			<% } %>

			<div class="form-sub-section-footer-ctn ui-helper-clearfix"
					 title="Add another contact person."
					 onclick="app.expandForm(this.parentNode.children[1])">
				<p class="add-input ui-ex-hover ui-state-default ui-corner-all">
					<span class="ui-icon ui-icon-circle-plus"></span>
				</p>
				<span>Add another contact person.</span>
			</div>

		</div>
	</script>

	<script type="text/html" id="customer-addresses_template">
		<% var i = 0, len = addresses.length, address; %>
		<div class="form-sub-section">
			<div class="form-sub-section-head-ctn">
				<h4 class="form-sub-section-header">Addresses</h4>
			</div>

			<% for (; i < len; i += 1) { %>
			<% address = addresses[i]; %>
			<div class="input-section">
				<div class="line">
					<p>
						<label>street:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= address.street.path %>" value="<%= address.street.value %>" />
					</p>
				</div>
				<div class="line ui-helper-clearfix">
					<p class="input-float">
						<label>city:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= address.city.path %>" value="<%= address.city.value %>" />
					</p>
					<p class="input-float">
						<label>state:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= address.state.path %>" value="<%= address.state.value %>" />
					</p>
					<p class="input-float">
						<label>zip:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= address.zip.path %>" value="<%= address.zip.value %>" />
					</p>
				</div>
			</div>
			<% } %>

			<div class="form-sub-section-footer-ctn ui-helper-clearfix"
					 title="Add another customer address."
					 onclick="app.expandForm(this.parentNode.children[1])">
				<p class="add-input ui-ex-hover ui-state-default ui-corner-all">
					<span class="ui-icon ui-icon-circle-plus"></span>
				</p>
				<span>Add another customer address.</span>
			</div>
		</div>
	</script>

	<script type="text/html" id="customer-phones_template">
		<% var i = 0, len = phones.length, phone; %>
		<div class="form-sub-section">
			<div class="form-sub-section-head-ctn">
				<h4 class="form-sub-section-header">Phone Numbers</h4>
			</div>

			<% for (; i < len; i += 1) { %>
			<% phone = phones[i]; %>
			<div class="input-section">
				<div class="line ui-helper-clearfix">
					<p class="input-float">
						<label>number:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= phone.phone.path %>" value="<%= phone.phone.value %>" />
					</p>
					<p class="input-float">
						<label>label:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= phone.label.path %>" value="<%= phone.label.value %>" />
					</p>
				</div>
			</div>
			<% } %>

			<div class="form-sub-section-footer-ctn ui-helper-clearfix"
					 title="Add another phone number."
					 onclick="app.expandForm(this.parentNode.children[1])">
				<p class="add-input ui-ex-hover ui-state-default ui-corner-all">
					<span class="ui-icon ui-icon-circle-plus"></span>
				</p>
				<span>Add another phone number.</span>
			</div>
		</div>
	</script>

	<script type="text/html" id="customer-emails_template">
		<% var i = 0, len = emails.length, email; %>
		<div class="form-sub-section">
			<div class="form-sub-section-head-ctn">
				<h4 class="form-sub-section-header">Email Addresses</h4>
			</div>

			<% for (; i < len; i += 1) { %>
			<% email = emails[i]; %>
			<div class="input-section">
				<div class="line ui-helper-clearfix">
					<p class="input-float">
						<label>email:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= email.email.path %>" value="<%= email.email.value %>" />
					</p>
					<p class="input-float">
						<label>label:</label>
						<input class="clean-text-input bbqpork" type="text"
							name="<%= email.label.path %>" value="<%= email.label.value %>" />
					</p>
				</div>
			</div>
			<% } %>

			<div class="form-sub-section-footer-ctn ui-helper-clearfix"
					 title="Add another email address."
					 onclick="app.expandForm(this.parentNode.children[1])">
				<p class="add-input ui-ex-hover ui-state-default ui-corner-all">
					<span class="ui-icon ui-icon-circle-plus"></span>
				</p>
				<span>Add another email address.</span>
			</div>
		</div>
	</script>

	<script type="text/html" id="customer-results_template">
		<% var key, customer; %>
		<ul>
			<% for (key in customers) { %>
			<% if (Object.prototype.hasOwnProperty.call(customers, key)) { %>
			<% customer = customers[key]; %>
			<li>
				<a href="#show?key=<%= key %>"><%= customer.lastname %></a>
			</li>
			<% } %>
			<% } %>
		</ul>
	</script>

	<!-- end templates -->

</body>
</html>
